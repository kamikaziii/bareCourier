# Supabase Auth Configuration
[auth]
site_url = "https://barecourier.vercel.app"
additional_redirect_urls = [
  "https://barecourier.vercel.app/reset-password",
  "https://barecourier.vercel.app/en/reset-password",
  "https://barecourier.vercel.app/pt-PT/reset-password",
  "http://localhost:5173/reset-password",
  "http://localhost:5173/en/reset-password",
  "http://localhost:5173/pt-PT/reset-password",
  "https://barecourier.vercel.app/accept-invite",
  "https://barecourier.vercel.app/en/accept-invite",
  "https://barecourier.vercel.app/pt-PT/accept-invite",
  "http://localhost:5173/accept-invite",
  "http://localhost:5173/en/accept-invite",
  "http://localhost:5173/pt-PT/accept-invite"
]

# SMTP via Resend — all auth emails sent from AS Estafetagem
[auth.email.smtp]
host = "smtp.resend.com"
port = 465
user = "resend"
pass = "env(RESEND_API_KEY)"
admin_email = "geral@asestafetagem.pt"
sender_name = "AS Estafetagem"

# Auth email templates (Portuguese)
[auth.email.template.confirmation]
subject = "Confirme o seu email - AS Estafetagem"
content_path = "./supabase/templates/confirmation.html"

[auth.email.template.invite]
subject = "Convite - AS Estafetagem"
content_path = "./supabase/templates/invite.html"

[auth.email.template.recovery]
subject = "Repor palavra-passe - AS Estafetagem"
content_path = "./supabase/templates/recovery.html"

[auth.email.template.magic_link]
subject = "O seu link de acesso - AS Estafetagem"
content_path = "./supabase/templates/magic_link.html"

[auth.email.template.email_change]
subject = "Confirmar alteração de email - AS Estafetagem"
content_path = "./supabase/templates/email_change.html"

# Supabase Edge Functions Configuration
# https://supabase.com/docs/guides/functions/function-configuration
#
# --no-verify-jwt is required because Supabase 2026 API keys (sb_publishable_...)
# are not compatible with gateway JWT verification. Functions handle auth manually
# via auth.getUser() which is the recommended approach.
# See: https://github.com/orgs/supabase/discussions/41834

[functions.send-push]
verify_jwt = false

[functions.send-notification]
verify_jwt = false

[functions.send-email]
verify_jwt = false

[functions.check-past-due]
verify_jwt = false

[functions.daily-summary]
verify_jwt = false

[functions.create-client]
verify_jwt = false

[functions.bootstrap-courier]
verify_jwt = false

[functions.reset-client-password]
verify_jwt = false

[functions.check-client-status]
verify_jwt = false
